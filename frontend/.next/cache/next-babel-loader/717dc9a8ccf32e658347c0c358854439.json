{"ast":null,"code":"import useSWR from \"swr\";\nimport { useEffect, useState } from \"react\";\nimport makeSecuredRequest, { getNewToken } from \"../utils/makeSecuredRequest\";\n\nconst useUser = () => {\n  const {\n    data: user,\n    error\n  } = useSWR(\"/api/user\", makeSecuredRequest);\n  const {\n    0: authenticating,\n    1: setAuthenticating\n  } = useState(false);\n  const {\n    0: isAuthenticated,\n    1: setIsAuthenticated\n  } = useState(false);\n  useEffect(() => {\n    (async () => {\n      try {\n        setAuthenticating(true);\n        await getNewToken();\n        setIsAuthenticated(true);\n      } catch (error) {\n        console.log(error.response);\n      } finally {// setAuthenticating(false);\n      }\n    })();\n  }, []);\n  return {\n    user,\n    error,\n    fetchingUser: !error && !user,\n    authenticating,\n    isAuthenticated\n  };\n};\n\nexport default useUser;","map":{"version":3,"sources":["/home/jaybarnes/Desktop/Projects/forum/frontend/hooks/useUser.ts"],"names":["useSWR","useEffect","useState","makeSecuredRequest","getNewToken","useUser","data","user","error","authenticating","setAuthenticating","isAuthenticated","setIsAuthenticated","console","log","response","fetchingUser"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,KAAnB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,OAAOC,kBAAP,IAA6BC,WAA7B,QAAgD,6BAAhD;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAM;AAAEC,IAAAA,IAAI,EAAEC,IAAR;AAAcC,IAAAA;AAAd,MAAwBR,MAAM,CAAC,WAAD,EAAcG,kBAAd,CAApC;AAEA,QAAM;AAAA,OAACM,cAAD;AAAA,OAAiBC;AAAjB,MAAsCR,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM;AAAA,OAACS,eAAD;AAAA,OAAkBC;AAAlB,MAAwCV,QAAQ,CAAC,KAAD,CAAtD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAY;AACX,UAAI;AACFS,QAAAA,iBAAiB,CAAC,IAAD,CAAjB;AAEA,cAAMN,WAAW,EAAjB;AACAQ,QAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,OALD,CAKE,OAAOJ,KAAP,EAAc;AACdK,QAAAA,OAAO,CAACC,GAAR,CAAYN,KAAK,CAACO,QAAlB;AACD,OAPD,SAOU,CACR;AACD;AACF,KAXD;AAYD,GAbQ,EAaN,EAbM,CAAT;AAeA,SAAO;AACLR,IAAAA,IADK;AAELC,IAAAA,KAFK;AAGLQ,IAAAA,YAAY,EAAE,CAACR,KAAD,IAAU,CAACD,IAHpB;AAILE,IAAAA,cAJK;AAKLE,IAAAA;AALK,GAAP;AAOD,CA5BD;;AA8BA,eAAeN,OAAf","sourcesContent":["import useSWR from \"swr\";\nimport { useEffect, useState } from \"react\";\nimport { setAccessToken } from \"../token\";\nimport makeSecuredRequest, { getNewToken } from \"../utils/makeSecuredRequest\";\n\nconst useUser = () => {\n  const { data: user, error } = useSWR(\"/api/user\", makeSecuredRequest);\n\n  const [authenticating, setAuthenticating] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        setAuthenticating(true);\n\n        await getNewToken();\n        setIsAuthenticated(true);\n      } catch (error) {\n        console.log(error.response);\n      } finally {\n        // setAuthenticating(false);\n      }\n    })();\n  }, []);\n\n  return {\n    user,\n    error,\n    fetchingUser: !error && !user,\n    authenticating,\n    isAuthenticated,\n  };\n};\n\nexport default useUser;\n"]},"metadata":{},"sourceType":"module"}